# Инструкция по наполнению блоков совместимости

## Структура создана

В проекте созданы 15 блоков расшифровки для матрицы совместимости:

1. **Энергетическая динамика пары**
2. **Психология отношений**
3. **Личностные триггеры и точки напряжения**
4. **Притяжение и причины магнита**
5. **Совместимость в любви**
6. **Совместимость в сексе**
7. **Совместимость в быту**
8. **Финансовая совместимость**
9. **Духовная совместимость**
10. **Кармическая задача пары**
11. **Потенциальные сценарии расставаний**
12. **Сила пары**
13. **Как сохранять гармонию**
14. **Вероятность долгосрочных отношений**
15. **Итог**

## Файлы

### HTML: `compatibility.html`
- Добавлены 15 блоков `.sphere-item` с уникальными ID
- Каждый блок имеет заголовок, подзаголовок, место для аркана и контент

### Данные: `src/compatibility_texts.js`
- Содержит объект `COMPATIBILITY_TEXTS`
- Структура: 22 аркана × 15 сфер = 330 ячеек для расшифровок
- **СЕЙЧАС СОДЕРЖИТ ЗАГЛУШКИ** - нужно заполнить реальными текстами

### Логика: `src/compatibility_spheres.js`
- Функция `fillCompatibilitySpheres(compatibility)` - заполняет блоки
- Функция `updateCompatibilitySphereContent(sphereId, arcanaNumber)` - обновляет один блок
- Аккордеон для открытия/закрытия блоков
- Автоматический скролл к открытому блоку

## Что нужно сделать

### 1. Наполнить тексты расшифровок

Открыть `src/compatibility_texts.js` и заменить заглушки на реальные тексты для каждого аркана.

Пример структуры:
```javascript
"1": {
  title: "1 — МАГ",
  spheres: {
    "Энергетическая динамика пары": "Здесь полный текст расшифровки...",
    "Психология отношений": "Здесь полный текст расшифровки...",
    // ... и так для всех 15 блоков
  }
}
```

### 2. Настроить маппинг арканов

В файле `src/compatibility_spheres.js` в функции `fillCompatibilitySpheres()` есть объект `sphereArcanaMapping`.

**ВАЖНО**: Сейчас там используются заглушки. Нужно заменить на правильные значения из расчетов совместимости.

Текущий код (ЗАГЛУШКА):
```javascript
const sphereArcanaMapping = {
  'sphere-energy-dynamics': compatibility.points.skypoint || 1,
  'sphere-psychology': compatibility.points.earthpoint || 2,
  // ...
};
```

Нужно определить, какие именно точки из `compatibility.points` соответствуют каждому блоку.

### 3. Интеграция с расчетом совместимости

В файле `src/inputs_compatibility.js` найти место, где создается объект совместимости после расчета, и вызвать:

```javascript
fillCompatibilitySpheres(compatibility);
```

## Доступные данные из расчета

В объекте `compatibility` должны быть доступны точки:
- `compatibility.points.skypoint` (Небо)
- `compatibility.points.earthpoint` (Земля)  
- `compatibility.points.malepoint` (Мужское начало)
- `compatibility.points.femalepoint` (Женское начало)
- `compatibility.points.union` (Союз)
- `compatibility.points.harmony` (Гармония)
- `compatibility.points.harmony1` (Гармония 1)
- `compatibility.points.harmony2` (Гармония 2)

**Нужно определить логику**, какая точка соответствует какому блоку.

## CSS

Все стили уже подключены из `assets/styles/index.css`:
- `.sphere-item` - контейнер блока
- `.sphere-header` - заголовок (кликабельный)
- `.sphere-content` - контент (раскрывается по клику)
- `.sphere-description` - текст расшифровки
- `.active` - класс для открытого состояния

## Тестирование

1. Открыть `compatibility.html`
2. Ввести даты рождения двух партнеров
3. Нажать "создать вашу матрицу"
4. Прокрутить вниз к блокам расшифровки
5. Кликнуть на заголовок любого блока - он должен раскрыться
6. Проверить, что показываются номера арканов и тексты

## Порядок работы

1. ✅ Создана HTML-структура (15 блоков)
2. ✅ Создан файл с данными (заглушки)
3. ✅ Создана логика отображения и аккордеон
4. ⏳ **TODO**: Наполнить реальными текстами в `compatibility_texts.js`
5. ⏳ **TODO**: Определить маппинг точек → блоков в `compatibility_spheres.js`
6. ⏳ **TODO**: Интегрировать вызов `fillCompatibilitySpheres()` в расчет
